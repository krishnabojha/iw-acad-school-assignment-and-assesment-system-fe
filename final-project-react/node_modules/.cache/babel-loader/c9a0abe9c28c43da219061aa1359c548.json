{"ast":null,"code":"var _jsxFileName = \"D:\\\\Insight_workshop\\\\Django_React_project\\\\final project(React)\\\\final-project-react\\\\src\\\\Authentication\\\\Userdata.js\";\nimport React, { Component } from 'react';\nimport CreateClassForm from './CreateClassForm';\nexport default class Userdata extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      obj: [],\n      usertoken: [],\n      createClass: false,\n      userobj: []\n    };\n\n    this.componentDidMount = () => {\n      //fetching token to get user_id\n      // fetch('http://127.0.0.1:8000/user/token/',{\n      //     method: 'GET'\n      // }).then(response => response.json())\n      // .then(result => {\n      //     console.log('this is result : ', result)\n      //     this.setState({\n      //         usertoken: result.filter(function(item){return item.key === localStorage.getItem('token')}),\n      //     })\n      // })\n      // //fetching users to get email\n      // fetch('http://127.0.0.1:8000/user/list/',{\n      //     method: 'GET',\n      //     headers: {\n      //         'Content-Type': 'application/json',\n      //         'Authorization': 'Token '+localStorage.getItem('token')\n      //     },\n      // }).then((respone)=>respone.json())\n      // .then(result =>{\n      //     const {usertoken} = this.state\n      //     this.setState({\n      //         userobj: result.filter(function(item){return item.id === usertoken[0].user_id})\n      //     })\n      // })\n      // fetching class room to get class room of logged in user \n      fetch('http://127.0.0.1:8000/data/studymaterial_class_list/', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Token ' + localStorage.getItem('token')\n        }\n      }).then(respone => respone.json()).then(result => {\n        // const {userobj} = this.state\n        this.setState({\n          obj: result.filter(function (value) {\n            return value.email === localStorage.getItem('email');\n          })\n        });\n      }); // fetching user detail\n\n      console.log('Token ', localStorage.getItem('token'));\n      console.log('this is email haha', localStorage.getItem('email'));\n    };\n\n    this.onLogout = () => {\n      localStorage.removeItem('token');\n      window.location.reload();\n    };\n\n    this.onCreateClass = () => {\n      this.setState({\n        createClass: true\n      });\n    };\n  }\n\n  render() {\n    console.log('this is obj: ', this.state.obj);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.onLogout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }\n    }, \"Logout\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.onCreateClass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }, \"Create Class\"), this.state.createClass === false ? this.state.obj.map(function (item) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: item.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 26\n        }\n      }, item.classname), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 25\n        }\n      }, item.email));\n    }) : /*#__PURE__*/React.createElement(CreateClassForm, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 23\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["D:/Insight_workshop/Django_React_project/final project(React)/final-project-react/src/Authentication/Userdata.js"],"names":["React","Component","CreateClassForm","Userdata","state","obj","usertoken","createClass","userobj","componentDidMount","fetch","method","headers","localStorage","getItem","then","respone","json","result","setState","filter","value","email","console","log","onLogout","removeItem","window","location","reload","onCreateClass","render","map","item","id","classname"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AAEA,eAAe,MAAMC,QAAN,SAAuBF,SAAvB,CAAiC;AAAA;AAAA;AAAA,SAC5CG,KAD4C,GACpC;AACJC,MAAAA,GAAG,EAAC,EADA;AAEJC,MAAAA,SAAS,EAAC,EAFN;AAGJC,MAAAA,WAAW,EAAC,KAHR;AAIJC,MAAAA,OAAO,EAAE;AAJL,KADoC;;AAAA,SAO5CC,iBAP4C,GAO1B,MAAI;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACAC,MAAAA,KAAK,CAAC,sDAAD,EAAwD;AACzDC,QAAAA,MAAM,EAAE,KADiD;AAEzDC,QAAAA,OAAO,EAAE;AACL,0BAAgB,kBADX;AAEL,2BAAiB,WAASC,YAAY,CAACC,OAAb,CAAqB,OAArB;AAFrB;AAFgD,OAAxD,CAAL,CAOGC,IAPH,CAOSC,OAAD,IAAWA,OAAO,CAACC,IAAR,EAPnB,EAQCF,IARD,CAQMG,MAAM,IAAG;AACX;AACA,aAAKC,QAAL,CAAc;AACVd,UAAAA,GAAG,EAAEa,MAAM,CAACE,MAAP,CAAc,UAASC,KAAT,EAAe;AAAC,mBAAOA,KAAK,CAACC,KAAN,KAAgBT,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAvB;AAAqD,WAAnF;AADK,SAAd;AAGH,OAbD,EA7BkB,CA4ClB;;AACAS,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBX,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAtB;AACAS,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCX,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAlC;AAEH,KAvD2C;;AAAA,SAwD5CW,QAxD4C,GAwDlC,MAAI;AACVZ,MAAAA,YAAY,CAACa,UAAb,CAAwB,OAAxB;AACAC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACH,KA3D2C;;AAAA,SA4D5CC,aA5D4C,GA4D7B,MAAI;AACf,WAAKX,QAAL,CAAc;AACVZ,QAAAA,WAAW,EAAE;AADH,OAAd;AAGH,KAhE2C;AAAA;;AAiE5CwB,EAAAA,MAAM,GAAG;AACLR,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6B,KAAKpB,KAAL,CAAWC,GAAxC;AACA,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAQ,MAAA,OAAO,EAAI,KAAKoB,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAQ,MAAA,OAAO,EAAI,KAAKK,aAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ,EAGS,KAAK1B,KAAL,CAAWG,WAAX,KAA2B,KAA5B,GACA,KAAKH,KAAL,CAAWC,GAAX,CAAe2B,GAAf,CAAmB,UAASC,IAAT,EAAc;AAC7B,0BAAQ;AAAK,QAAA,GAAG,EAAIA,IAAI,CAACC,EAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKD,IAAI,CAACE,SAAV,CADO,eAER;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKF,IAAI,CAACX,KAAV,CAFQ,CAAR;AAIH,KALD,CADA,gBAOE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVV,CADJ;AAeH;;AAlF2C","sourcesContent":["import React, { Component } from 'react'\r\nimport CreateClassForm from './CreateClassForm'\r\n\r\nexport default class Userdata extends Component {\r\n    state = {\r\n        obj:[],\r\n        usertoken:[],\r\n        createClass:false,\r\n        userobj: [],\r\n    }\r\n    componentDidMount=()=>{\r\n        //fetching token to get user_id\r\n        // fetch('http://127.0.0.1:8000/user/token/',{\r\n        //     method: 'GET'\r\n        // }).then(response => response.json())\r\n        // .then(result => {\r\n        //     console.log('this is result : ', result)\r\n        //     this.setState({\r\n        //         usertoken: result.filter(function(item){return item.key === localStorage.getItem('token')}),\r\n        //     })\r\n        // })\r\n       \r\n        // //fetching users to get email\r\n        // fetch('http://127.0.0.1:8000/user/list/',{\r\n        //     method: 'GET',\r\n        //     headers: {\r\n        //         'Content-Type': 'application/json',\r\n        //         'Authorization': 'Token '+localStorage.getItem('token')\r\n        //     },\r\n\r\n        // }).then((respone)=>respone.json())\r\n        // .then(result =>{\r\n        //     const {usertoken} = this.state\r\n        //     this.setState({\r\n        //         userobj: result.filter(function(item){return item.id === usertoken[0].user_id})\r\n        //     })\r\n        // })\r\n\r\n        // fetching class room to get class room of logged in user \r\n        fetch('http://127.0.0.1:8000/data/studymaterial_class_list/',{\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': 'Token '+localStorage.getItem('token')\r\n            },\r\n\r\n        }).then((respone)=>respone.json())\r\n        .then(result =>{\r\n            // const {userobj} = this.state\r\n            this.setState({\r\n                obj: result.filter(function(value){return value.email === localStorage.getItem('email')})\r\n            })\r\n        })\r\n\r\n        // fetching user detail\r\n        console.log('Token ', localStorage.getItem('token'))\r\n        console.log('this is email haha', localStorage.getItem('email'))\r\n        \r\n    }\r\n    onLogout =()=>{\r\n        localStorage.removeItem('token')\r\n        window.location.reload();\r\n    }\r\n    onCreateClass =()=>{\r\n        this.setState({\r\n            createClass: true\r\n        })\r\n    }\r\n    render() {\r\n        console.log('this is obj: ', this.state.obj)\r\n        return (\r\n            <div>\r\n                <button onClick = {this.onLogout}>Logout</button>\r\n                <button onClick = {this.onCreateClass}>Create Class</button>\r\n                {   (this.state.createClass === false)?\r\n                    this.state.obj.map(function(item){\r\n                        return (<div key = {item.id}>\r\n                         <h3>{item.classname}</h3>\r\n                        <h3>{item.email}</h3>\r\n                        </div>)\r\n                    })\r\n                    : <CreateClassForm></CreateClassForm>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}