{"ast":null,"code":"var _jsxFileName = \"D:\\\\Insight_workshop\\\\Django_React_project\\\\final project(React)\\\\final-project-react\\\\src\\\\Authentication\\\\Userdata.js\";\nimport React, { Component } from 'react'; // import CreateClassForm from './CreateClassForm'\n\nimport './CreateClassForm.css';\nexport default class Userdata extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      obj: [],\n      usertoken: [],\n      createClass: false,\n      userobj: [],\n      createbtn: 'Create Class',\n      newclassname: ''\n    };\n\n    this.componentDidMount = () => {\n      //fetching token to get user_id\n      fetch('http://127.0.0.1:8000/user/token/', {\n        method: 'GET'\n      }).then(response => response.json()).then(result => {\n        console.log('this is result : ', result);\n        this.setState({\n          usertoken: result.filter(function (item) {\n            return item.key === localStorage.getItem('token');\n          })\n        });\n      }); //fetching users to get email\n\n      fetch('http://127.0.0.1:8000/user/list/', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Token ' + localStorage.getItem('token')\n        }\n      }).then(respone => respone.json()).then(result => {\n        const {\n          usertoken\n        } = this.state;\n        this.setState({\n          userobj: result.filter(function (item) {\n            return item.id === usertoken[0].user_id;\n          })\n        });\n        console.log('this is user email', this.state.userobj[0].email); /// storing the email to the local storage\n\n        localStorage.setItem('email', this.state.userobj[0].email);\n      }); // fetching class room to get class room of logged in user \n\n      fetch('http://127.0.0.1:8000/data/studymaterial_class_list/', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Token ' + localStorage.getItem('token')\n        }\n      }).then(respone => respone.json()).then(result => {\n        this.setState({\n          obj: result.filter(function (value) {\n            return value.email === localStorage.getItem('email');\n          })\n        });\n      });\n      console.log('Token ', localStorage.getItem('token'));\n      console.log('this is email haha', localStorage.getItem('email'));\n    };\n\n    this.onCreateClass = event => {\n      //creating a new classroom\n      const newclass = new FormData();\n      newclass.append('Classname', this.state.newclassname);\n      newclass.append('email', localStorage.getItem('email'));\n      fetch('http://127.0.0.1:8000/data/studymaterial_class_create/', {\n        method: 'POST',\n        body: newclass\n      });\n    };\n\n    this.onLogout = () => {\n      localStorage.removeItem('token');\n      localStorage.removeItem('email');\n      window.location.reload();\n    };\n\n    this.onCreateClass = () => {\n      if (this.state.createClass === false) {\n        this.setState({\n          createClass: true,\n          createbtn: 'Submit'\n        });\n      } else {\n        this.setState({\n          createClass: false,\n          createbtn: 'Create Class'\n        });\n      }\n    };\n\n    this.onChangeInput = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n  }\n\n  render() {\n    console.log('this is obj: ', this.state.obj);\n    const {\n      newclassname\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"top-bar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logout-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.onCreateClass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }\n    }, this.state.createbtn), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.onLogout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    }, \"Logout\")), this.state.createClass === true ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"create-class-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"newclassname\",\n      value: newclassname,\n      placeholder: \"Enter name of new Class\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 29\n      }\n    })) : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 27\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"side-bar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"classes-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }\n    }, this.state.obj.map(function (item) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: item.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 26\n        }\n      }, item.classname), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 25\n        }\n      }, item.email));\n    })));\n  }\n\n}","map":{"version":3,"sources":["D:/Insight_workshop/Django_React_project/final project(React)/final-project-react/src/Authentication/Userdata.js"],"names":["React","Component","Userdata","state","obj","usertoken","createClass","userobj","createbtn","newclassname","componentDidMount","fetch","method","then","response","json","result","console","log","setState","filter","item","key","localStorage","getItem","headers","respone","id","user_id","email","setItem","value","onCreateClass","event","newclass","FormData","append","body","onLogout","removeItem","window","location","reload","onChangeInput","target","name","render","map","classname"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\n// import CreateClassForm from './CreateClassForm'\r\nimport './CreateClassForm.css'\r\n\r\nexport default class Userdata extends Component {\r\n    state = {\r\n        obj:[],\r\n        usertoken:[],\r\n        createClass:false,\r\n        userobj: [],\r\n        createbtn: 'Create Class',\r\n        newclassname:'',\r\n    }\r\n    componentDidMount=()=>{\r\n        //fetching token to get user_id\r\n        fetch('http://127.0.0.1:8000/user/token/',{\r\n            method: 'GET'\r\n        }).then(response => response.json())\r\n        .then(result => {\r\n            console.log('this is result : ', result)\r\n            this.setState({\r\n                usertoken: result.filter(function(item){return item.key === localStorage.getItem('token')}),\r\n            })\r\n        })\r\n       \r\n        //fetching users to get email\r\n        fetch('http://127.0.0.1:8000/user/list/',{\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': 'Token '+localStorage.getItem('token')\r\n            },\r\n        }).then((respone)=>respone.json())\r\n        .then(result =>{\r\n            const {usertoken} = this.state\r\n            this.setState({\r\n                userobj: result.filter(function(item){return item.id === usertoken[0].user_id})\r\n            })\r\n            console.log('this is user email', this.state.userobj[0].email)\r\n            /// storing the email to the local storage\r\n            localStorage.setItem('email',this.state.userobj[0].email)\r\n        })\r\n\r\n        // fetching class room to get class room of logged in user \r\n        fetch('http://127.0.0.1:8000/data/studymaterial_class_list/',{\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': 'Token '+localStorage.getItem('token')\r\n            },\r\n        }).then((respone)=>respone.json())\r\n        .then(result =>{\r\n            this.setState({\r\n                obj: result.filter(function(value){return value.email === localStorage.getItem('email')})\r\n            })\r\n        })\r\n        \r\n        console.log('Token ', localStorage.getItem('token'))\r\n        console.log('this is email haha', localStorage.getItem('email'))\r\n    }\r\n    onCreateClass=(event)=>{\r\n        //creating a new classroom\r\n        const newclass = new FormData()\r\n        newclass.append('Classname', this.state.newclassname)\r\n        newclass.append('email', localStorage.getItem('email'))\r\n        fetch('http://127.0.0.1:8000/data/studymaterial_class_create/',{\r\n            method: 'POST',\r\n            body:newclass\r\n        })\r\n    }\r\n    onLogout =()=>{\r\n        localStorage.removeItem('token')\r\n        localStorage.removeItem('email')\r\n        window.location.reload();\r\n    }\r\n    onCreateClass =()=>{\r\n        if(this.state.createClass === false){\r\n            this.setState({\r\n                createClass: true,\r\n                createbtn: 'Submit'\r\n            })\r\n        }\r\n        else{\r\n            this.setState({\r\n                createClass: false,\r\n                createbtn: 'Create Class'\r\n            })\r\n        }\r\n    }\r\n    onChangeInput =(event)=>{\r\n        this.setState({\r\n            [event.target.name] : event.target.value\r\n        })\r\n    }\r\n    render() {\r\n        console.log('this is obj: ', this.state.obj)\r\n        const {newclassname} = this.state\r\n        return (\r\n            <div>\r\n                <div className = 'top-bar'>\r\n                <div className = 'logout-btn'>\r\n                    <button onClick = {this.onCreateClass}>{this.state.createbtn}</button>\r\n                    <button onClick = {this.onLogout}>Logout</button>\r\n                </div>\r\n                {\r\n                        (this.state.createClass === true)?\r\n                        <div className = 'create-class-form'>\r\n                            <input type = 'text' name = 'newclassname' value = {newclassname} placeholder = 'Enter name of new Class' required></input>\r\n                        </div>\r\n                        : <p></p>\r\n                    }\r\n                </div>\r\n                {/* side bar */}\r\n                <div className = \"side-bar\">\r\n                    \r\n                </div>\r\n\r\n                <div className = \"classes-div\">\r\n                {   \r\n                    this.state.obj.map(function(item){\r\n                        return (<div key = {item.id}>\r\n                         <h3>{item.classname}</h3>\r\n                        <h3>{item.email}</h3>\r\n                        </div>)\r\n                    })\r\n                }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}